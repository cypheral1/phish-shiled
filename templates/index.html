<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phishing Shield - Detector</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Animated Background -->
    <div class="background-container">
        <div class="gradient-bg"></div>
        <div class="scanlines"></div>
        <div class="particles-container" id="particlesContainer"></div>
        <div class="grid-overlay"></div>
    </div>

    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <span class="logo-icon">üõ°Ô∏è</span>
                <span class="logo-text">Phishing Shield</span>
            </div>
            <div class="nav-links">
                <a href="/hero" class="nav-link">‚Üê Back to Home</a>
                <a href="#" class="nav-link" id="exportLink">üì• Export Results</a>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="main-title">
                    Email <span class="gradient-text">Analyzer</span>
                </h1>
                <p class="subtitle">Advanced phishing detection with real-time analysis</p>
                <div class="header-stats">
                    <div class="stat-item">
                        <span class="stat-icon">‚ö°</span>
                        <span class="stat-label">Instant Detection</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üéØ</span>
                        <span class="stat-label">94% Accurate</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üîí</span>
                        <span class="stat-label">100% Private</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <div class="content-wrapper">
                <!-- Left Column: Input -->
                <div class="input-column">
                    <div class="tabs">
                        <button class="tab-btn active" data-tab="text-input">üìù Paste Email</button>
                        <button class="tab-btn" data-tab="file-upload">üì§ Upload File</button>
                        <button class="tab-btn" data-tab="history">üìä History</button>
                    </div>
                    <!-- Tab 1: Text Input -->
                    <section id="text-input" class="tab-content active">
                        <div class="input-section">
                            <div class="textarea-wrapper">
                                <textarea id="emailInput" 
                                    placeholder="Paste your complete email here...
Including: From, To, Subject, Headers, and Body

Tips:
‚Ä¢ Include email headers for better detection
‚Ä¢ Full email source works best
‚Ä¢ Paste HTML emails as-is" 
                                    rows="14"></textarea>
                                <div class="textarea-info">
                                    <span id="charCount">0</span> characters
                                </div>
                            </div>
                            <div class="button-group">
                                <button id="analyzeBtn" class="btn btn-primary btn-large">
                                    <span class="btn-icon">üîç</span>
                                    <span class="btn-text">Analyze Email</span>
                                </button>
                                <button id="clearBtn" class="btn btn-secondary">Clear</button>
                            </div>
                            <p class="keyboard-hint">üí° Tip: Press <kbd>Ctrl+Enter</kbd> to analyze</p>
                        </div>
                    </section>

                    <!-- Tab 2: File Upload -->
                    <section id="file-upload" class="tab-content">
                        <div class="upload-section">
                            <div class="upload-area">
                                <div class="file-input-wrapper">
                                    <input type="file" id="fileInput" accept=".txt,.eml,.msg">
                                    <label for="fileInput" class="file-label">üìÅ Choose Email File</label>
                                </div>
                                <p class="file-help-text">or drag and drop your file here</p>
                                
                                <div id="fileInfo" class="file-info hidden">
                                    <h4>üìÑ File Information</h4>
                                    <ul id="fileInfoList"></ul>
                                </div>
                                
                                <div class="file-support">
                                    <h4>‚úÖ Supported Formats</h4>
                                    <ul>
                                        <li><strong>.txt</strong> - Plain text email</li>
                                        <li><strong>.eml</strong> - Email message file</li>
                                        <li><strong>.msg</strong> - Outlook message file</li>
                                    </ul>
                                    <p class="file-limits">üìè Max file size: 100MB</p>
                                </div>
                            </div>
                            <button id="uploadBtn" class="btn btn-primary btn-large">
                                <span class="btn-icon">üì§</span>
                                <span class="btn-text">Upload & Analyze</span>
                            </button>
                        </div>
                    </section>

                    <!-- Tab 3: History -->
                    <section id="history" class="tab-content">
                        <div class="history-section">
                            <div class="history-header">
                                <h3>Previous Analyses</h3>
                                <button id="clearHistoryBtn" class="btn btn-small">Clear History</button>
                            </div>
                            <div id="historyList" class="history-list">
                                <p class="history-empty">No analysis history yet. Start by analyzing an email!</p>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Right Column: Results -->
                <div class="results-column">
                    <div id="resultsContainer" class="results-container hidden">
                        <!-- Loading State -->
                        <div id="loadingState" class="loading-state hidden">
                            <div class="spinner"></div>
                            <p>Analyzing email...</p>
                        </div>

                        <!-- Results Display -->
                        <div id="resultsDisplay" class="results-display hidden">
                            <!-- Risk Score Circle -->
                            <div class="score-section">
                                <div class="score-circle-wrapper">
                                    <svg class="score-circle" viewBox="0 0 200 200">
                                        <circle cx="100" cy="100" r="95" class="score-bg"></circle>
                                        <circle cx="100" cy="100" r="95" class="score-fill" id="scoreFill"></circle>
                                        <circle cx="100" cy="100" r="95" class="score-glow" id="scoreGlow"></circle>
                                    </svg>
                                    <div class="score-center">
                                        <div class="score-value" id="scoreValue">0</div>
                                        <div class="score-max">/100</div>
                                    </div>
                                </div>
                                <div class="score-details">
                                    <div class="risk-level" id="riskLevel"></div>
                                    <p class="score-description" id="scoreDescription"></p>
                                </div>
                            </div>

                            <!-- Email Details -->
                            <div class="email-details">
                                <h3>üìß Email Information</h3>
                                <div class="detail-row">
                                    <span class="detail-label">From:</span>
                                    <span class="detail-value" id="fromValue">N/A</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Subject:</span>
                                    <span class="detail-value" id="subjectValue">N/A</span>
                                </div>
                            </div>

                            <!-- Analysis Reasons -->
                            <div class="analysis-reasons">
                                <h3>üîç Analysis Results</h3>
                                <div id="reasonsList" class="reasons-list"></div>
                            </div>

                            <!-- Suspicious URLs -->
                            <div id="urlsSection" class="urls-section hidden">
                                <h3>üîó Suspicious URLs</h3>
                                <div id="urlsList" class="urls-list"></div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="action-buttons">
                                <button id="exportResultBtn" class="btn btn-primary">üì• Export JSON</button>
                                <button id="analyzeAnotherBtn" class="btn btn-secondary">Analyze Another</button>
                            </div>
                        </div>

                        <!-- Error State -->
                        <div id="errorState" class="error-state hidden">
                            <div class="error-icon">‚ö†Ô∏è</div>
                            <h3>Analysis Error</h3>
                            <p id="errorMessage"></p>
                            <button id="errorDismissBtn" class="btn btn-secondary">Dismiss</button>
                        </div>
                    </div>

                    <!-- Empty State -->
                    <div id="emptyState" class="empty-state">
                        <div class="empty-icon">üéØ</div>
                        <h3>Ready to Analyze</h3>
                        <p>Paste an email or upload a file to get started</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Notifications -->
    <div id="notificationsContainer" class="notifications-container"></div>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2024 Phishing Shield by Cicada Tech | Privacy First ‚Ä¢ No Tracking</p>
    </footer>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
